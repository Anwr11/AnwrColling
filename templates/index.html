<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Colling • Dark</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dark.css') }}">
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="app">
    <header class="topbar glass">
      <button id="menuBtn" class="ico only-mobile" aria-label="قائمة">☰</button>
      <div class="head">
        <div id="peerTitle" class="title">لا توجد محادثة</div>
        <div id="peerSub" class="sub">اختر محادثة من القائمة</div>
      </div>
      <div class="actions">
        <button id="muteBtn" class="btn ico">🔇</button>
        <button id="callBtn" class="btn ico">📞</button>
        <button id="endCallBtn" class="btn ico danger">🛑</button>
      </div>
    </header>

    <aside id="sidebar" class="sidebar glass">
      <div class="brand">
        <div class="logo">⚡</div>
        <div>
          <div class="name">Colling</div>
          <div class="tag">محادثات فورية</div>
        </div>
      </div>

      <section class="card">
        <div class="label">رقمي</div>
        <div id="meNumber" class="mono">•••••••••</div>
        <div class="row">
          <button id="copyMyNumber" class="btn small">نسخ</button>
          <button id="toggleTheme" class="btn small">ثيم</button>
          <button id="dndBtn" class="btn small">عدم إزعاج</button>
        </div>
      </section>

      <section class="card">
        <div class="label">بدء محادثة</div>
        <div class="row">
          <input id="peerInput" class="input" placeholder="رقم الطرف الآخر" inputmode="numeric" />
          <button id="startChatBtn" class="btn primary">ابدأ</button>
        </div>
      </section>

      <div class="list-title">المحادثات</div>
      <ul id="chatList" class="chat-list"></ul>

      <section class="card dev">
        <div class="label">المطوّر</div>
        <div class="devbox">
          <div>
            <div class="devname">أنور البحراني</div>
            <a class="devphone" href="tel:774557377">774557377</a>
          </div>
          <div class="badge">Pro</div>
        </div>
      </section>
    </aside>

    <main class="main">
      <section id="messages" class="messages"></section>

      <!-- Exit bar ABOVE composer -->
      <div class="exit-bar glass">
        <div class="exit-note">الخروج من المحادثة الحالية</div>
        <button id="exitChat" class="btn danger small">❌ خروج</button>
      </div>

      <footer class="composer glass">
        <input id="msgBox" class="input flex" placeholder="اكتب رسالتك..." />
        <button id="sendBtn" class="btn primary big">إرسال</button>
      </footer>
    </main>

    <button id="fab" class="fab only-mobile">＋</button>
  </div>

  <div id="overlay" class="overlay"></div>

  <div id="incomingModal" class="modal">
    <div class="modal-card glass">
      <div class="m-title">📞 مكالمة واردة</div>
      <div id="incomingFrom" class="m-sub"></div>
      <div class="m-actions">
        <button id="acceptCall" class="btn primary">قبول</button>
        <button id="declineCall" class="btn danger">رفض</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">تم</div>

  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
