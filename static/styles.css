
:root{
  --bg:#0f141a;--bg2:#131a21;--bg3:#0c1116;
  --txt:#dbe6f2;--sub:#97a6b6;--acc:#4cc2ff;--acc2:#3ddc97;
  --danger:#ff5e7e;--muted:#2a3642;--line:#1a232d;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:"Cairo",system-ui,Segoe UI,Roboto,Arial;
  background:linear-gradient(120deg,var(--bg),var(--bg3));
  color:var(--txt); -webkit-font-smoothing:antialiased;
}
.app{display:grid;grid-template-columns:320px 1fr;min-height:100dvh}
.sidebar{
  background:linear-gradient(180deg,var(--bg2),var(--bg));
  border-inline-end:1px solid var(--line);padding:16px;display:flex;flex-direction:column;gap:12px;z-index:6;
}
.brand{display:flex;gap:12px;align-items:center;margin-bottom:6px}
.logo{font-size:20px}
.brand-title{font-weight:700}
.brand-sub{font-size:12px;color:var(--sub)}
.me-card,.dev-card,.new-chat{background:rgba(255,255,255,0.03);padding:12px;border:1px solid var(--line);border-radius:12px}
.me-label{font-size:12px;color:var(--sub)}
.me-number{font-family:ui-monospace,monospace;font-size:18px;margin:4px 0 8px}
.input{background:#0b1218;border:1px solid var(--line);color:var(--txt);padding:12px 14px;border-radius:12px;outline:none}
.input:focus{border-color:var(--acc)}
.btn{border:1px solid var(--line);background:#0b1218;color:var(--txt);padding:12px 14px;border-radius:12px;cursor:pointer;touch-action:manipulation}
.btn:hover{border-color:var(--acc)}
.btn.primary{background:linear-gradient(90deg,var(--acc),#6fe4ff);color:#07202a;border:none}
.btn.small{padding:8px 10px;font-size:13px}
.btn.ico{padding:10px 12px}
.btn.danger{background:linear-gradient(90deg,#ff5e7e,#ff8aa1);border:none;color:#24050b}
.btn.full{width:100%}
.side-tools{display:flex;gap:8px}
.list-title{margin-top:4px;color:var(--sub);font-size:13px}
.chat-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;overflow:auto;max-height:30vh}
.chat-item{display:flex;gap:10px;align-items:center;padding:12px;border-radius:12px;border:1px solid var(--line);cursor:pointer;background:#0b1218;font-size:15px}
.chat-item:hover{border-color:var(--acc)}
.chat-item.active{outline:2px solid var(--acc)}
.status-dot{width:10px;height:10px;border-radius:50%;background:#666}
.status-online{background:var(--acc2)}
.dev-card{margin-top:auto}
.dev-title{font-size:12px;color:var(--sub)}
.dev-name{font-weight:600}
.dev-phone{color:var(--acc)}

.main{display:grid;grid-template-rows:auto 1fr auto;min-height:100dvh}
.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 12px;padding-top:calc(10px + var(--safe-top));border-bottom:1px solid var(--line);background:rgba(255,255,255,0.02);position:sticky;top:0;z-index:5}
.only-mobile{display:none}
.peer-head{min-width:0}
.peer-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:56vw}
.peer-sub{color:var(--sub);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:56vw}
.messages{padding:12px;display:flex;flex-direction:column;gap:8px;overflow:auto}
.bubble{max-width:85%;padding:10px 12px;border-radius:14px;border:1px solid var(--line);background:#0b1218;font-size:15px;line-height:1.5}
.me{align-self:flex-end;background:linear-gradient(90deg,var(--acc),#6fe4ff);color:#042635;border:none}
.meta{font-size:11px;color:#0ff;opacity:.8;margin-top:2px}
.system{align-self:center;background:#0b1218;border-style:dashed;color:var(--sub)}
.composer{display:flex;gap:8px;padding:10px 12px;padding-bottom:calc(10px + var(--safe-bottom));border-top:1px solid var(--line);background:rgba(255,255,255,0.02);position:sticky;bottom:0}
.flex{flex:1}

.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:8}
.hidden{display:none}
.modal-card{width:min(420px,92vw);background:var(--bg2);border:1px solid var(--line);border-radius:14px;padding:16px}
.modal-title{font-weight:700;margin-bottom:6px}
.modal-sub{color:var(--sub);margin-bottom:12px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end}

.toast{position:fixed;inset-inline-start:50%;transform:translateX(-50%);bottom:16px;background:#0b1218;border:1px solid var(--line);padding:10px 14px;border-radius:10px;opacity:0;transition:opacity .2s;z-index:9}
.toast.show{opacity:1}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:4;display:none}

@media (max-width: 920px){
  .app{grid-template-columns:1fr}
  .sidebar{position:fixed;inset-block:0;inset-inline-start:0;width:min(86vw,420px);transform:translateX(-100%);transition:transform .2s ease}
  .sidebar.open{transform:none}
  .overlay.show{display:block}
  .only-mobile{display:inline-flex}
  .top-actions .btn{padding:8px 10px}
  .chat-list{max-height:42vh}
}
